document.addEventListener("DOMContentLoaded",function(){function e(e){e?s():setTimeout(function(){C.show()},500)}function t(){jQuery(document).on("click",".jb-accept, .jb-accept-all",function(){n(!0),a("allow"),p(),C.hide(),s()}),jQuery(document).on("click",".jb-deny, .jb-reject-all",function(){n(!1),a("deny"),m(),p(),C.hide(),s()}),jQuery(document).on("click",".jb-save-selection",function(){a("custom"),p(),C.hide(),s()}),jQuery(".jb-cookie-decline").on("click",function(){f("jbcookies"),S.fadeOut("slow",function(){C.show()})})}function n(e){document.querySelectorAll(".jb-cookie-toggle").forEach(function(t){t.disabled||(t.checked=e)})}function o(){var e={};return document.querySelectorAll(".jb-cookie-toggle").forEach(function(t){var n=t.getAttribute("data-group");e[n]=t.checked?1:0}),e}function c(){var e=l("jbcookies");if(!e)return{status:"",preferences:{}};try{var t=JSON.parse(e);if(t&&"object"==typeof t&&"string"==typeof t.status)return{status:t.status,preferences:t.preferences&&"object"==typeof t.preferences?t.preferences:{}}}catch(e){}return"allow"===e||"deny"===e||"custom"===e?{status:e,preferences:{}}:{status:"",preferences:{}}}function i(e){document.querySelectorAll(".jb-cookie-toggle").forEach(function(t){var n=t.getAttribute("data-group");Object.prototype.hasOwnProperty.call(e,n)&&!t.disabled&&(t.checked=!!e[n])})}function r(e,t){var n=JSON.stringify({status:e,preferences:t||{}});d("jbcookies",n),u(e,t||{})}function a(e){r(e,o())}function u(e,t){if("function"==typeof window.CustomEvent){var n=new CustomEvent("jbcookies:update",{detail:{status:e,preferences:t}});document.dispatchEvent(n)}}function s(){S.fadeIn("slow")}function d(e,t,n){var o="number"==typeof n?n:g,c=new Date;c.setDate(c.getDate()+o);var i=e+"="+encodeURIComponent(t)+"; expires="+c.toUTCString()+"; path=/";k&&(i+="; domain="+k),document.cookie=i}function f(e){d(e,"",-365)}function l(e){if(!e)return"";var t=e.replace(/[-\[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),n=new RegExp("(?:^|;\\s*)"+t+"\\s*=\\s*([^;]+)"),o=document.cookie.match(n);return o?decodeURIComponent(o[1]):""}function m(){Object.keys(E).forEach(function(e){if("necessary"!==String(e||"").toLowerCase()){var t=E[e]||[];t.forEach(function(e){if(e&&e.name){var t=String(e.name).toLowerCase();if(0!==t.indexOf("jbcookies"))if("*"!==e.name.slice(-1))f(e.name);else{var n=String(e.name.slice(0,-1)).toLowerCase();if(!n||!document.cookie)return;document.cookie.split(";").forEach(function(e){var t=e.split("=")[0].trim();if(t){var o=t.toLowerCase();0!==o.indexOf("jbcookies")&&0===o.indexOf(n)&&f(t)}})}}})}})}function p(){var e=document.getElementById("jbcookies-preferences");e&&(window.bootstrap&&window.bootstrap.Modal?window.bootstrap.Modal.getOrCreateInstance(e).hide():"undefined"!=typeof jQuery&&"function"==typeof jQuery(e).modal&&jQuery(e).modal("hide"))}function b(){var e=document.getElementById("jbcookies-preferences"),t=document.querySelector(".jb-cookie");e&&(e.addEventListener("shown.bs.modal",function(){e.removeAttribute("aria-hidden"),e.focus({preventScroll:!0})}),e.addEventListener("hidden.bs.modal",function(){document.activeElement&&e.contains(document.activeElement)&&document.activeElement.blur()})),t&&(t.addEventListener("shown.bs.modal",function(){t.removeAttribute("aria-hidden"),t.focus({preventScroll:!0})}),t.addEventListener("hidden.bs.modal",function(){document.activeElement&&t.contains(document.activeElement)&&document.activeElement.blur()}))}function v(){return document.cookie?document.cookie.split(";").map(function(e){var t=e.split("=")[0].trim();return t&&0!==t.toLowerCase().indexOf("jbcookies")?{name:t,source:window.location.hostname,category:"unassigned"}:null}).filter(function(e){return null!==e}):[]}function w(){if(h&&!j()&&O.url&&O.token){var e=v();if(e.length){var t=new FormData;t.append(O.token,"1"),t.append("mode","register"),t.append("cookies",JSON.stringify(e));try{fetch(O.url,{method:"POST",body:t,credentials:"same-origin"})}catch(e){}}}}function j(){var e=window.location&&window.location.pathname?window.location.pathname.toLowerCase():"";return 0===e.indexOf("/administrator")}var y=window.JBCOOKIES_CONFIG||{},h=!1!==y.allowBrowserCapture,k=y.domain||"",g=parseInt(y.duration||90,10),E=y.inventory||{},O=y.ajax||{},C=new bootstrap.Modal(".jb-cookie",{}),S=jQuery(".jb-cookie-decline"),L=c();i(L.preferences||{}),e(L.status),t(),b(),h&&w()});